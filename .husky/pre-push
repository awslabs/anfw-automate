#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Get the current branch
current_branch=$(git rev-parse --abbrev-ref HEAD)

# Skip checks for main and dev branches (they should go through PR)
if [ "$current_branch" = "main" ] || [ "$current_branch" = "dev" ]; then
    echo "âš ï¸  Direct push to $current_branch detected. Please use Pull Requests for main/dev branches."
    echo "   If this is intentional (e.g., hotfix), use --no-verify to bypass this check."
    exit 1
fi

# Run tests before push
echo "ğŸ§ª Running tests..."
npm test || exit 1

echo "âœ… Pre-push checks passed!"