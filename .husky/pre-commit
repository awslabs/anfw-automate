#!/usr/bin/env sh

echo "ğŸ” Running pre-commit checks..."

# Validate branch name
yarn validate:branch

# Run lint-staged (formatting)
yarn exec lint-staged

# Scan for secrets with gitleaks (critical - must catch before commit)
echo "ğŸ”’ Scanning for secrets..."
if ! make security:secrets > /dev/null 2>&1; then
    echo "âŒ ERROR: Secrets detected!"
    echo "   Run 'make security:secrets' for details"
    exit 1
fi
echo "âœ… No secrets detected"

echo "âœ… Pre-commit checks passed!"
