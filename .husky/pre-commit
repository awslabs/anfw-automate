#!/usr/bin/env sh

echo "ğŸ” Running pre-commit checks..."

# Validate branch name
yarn validate:branch

# Scan for secrets with gitleaks using make command
echo "ğŸ”’ Scanning for secrets with gitleaks..."
if ! make security:secrets; then
    exit 1
fi

# Check Prettier formatting on all files (same as CI)
echo "ğŸ¨ Checking code formatting..."
if ! yarn exec prettier --check "**/*.{ts,js,json,md,yml,yaml}" --ignore-path .prettierignore; then
    echo ""
    echo "âŒ Formatting issues detected!"
    echo "   Run 'make format' or 'yarn exec prettier --write \"**/*.{ts,js,json,md,yml,yaml}\" --ignore-path .prettierignore' to fix"
    exit 1
fi
echo "âœ… Formatting passed"

echo "âœ… Pre-commit checks passed!"

