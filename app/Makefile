all: build

help: 
	@echo "Available targets for app module:"
	@echo ""
	@echo "ğŸ—ï¸  Build & Test Commands:"
	@echo "  build            - Build this module (includes pre-synth)"
	@echo "  test             - Run tests"
	@echo "  lint             - Run linting"
	@echo "  lint-fix         - Fix lint issues"
	@echo ""
	@echo "ğŸš€ Deployment Commands:"
	@echo "  deploy           - Deploy to AWS"
	@echo ""
	@echo "ğŸ§¹ Utility Commands:"
	@echo "  clean            - Clean build artifacts"
	@echo "  update           - Update dependencies"

build: pre-synth
	@echo "ğŸ—ï¸  Building app module..."
	npm run build

test:
	@echo "ğŸ§ª Running app module tests..."
	npm test

lint:
	@echo "ğŸ” Running app module linting..."
	npm run lint

lint-fix:
	@echo "ğŸ”§ Fixing app module lint issues..."
	npm run lint-fix

pre-synth:
	@echo "ğŸ“¦ Running pre-synth packaging..."
	bash -e scripts/package.sh

deploy: build
	@echo "ğŸš€ Deploying app module..."
	npx cdk deploy --all

clean:
	@echo "ğŸ§¹ Cleaning app module artifacts..."
	npm run clean

update: 
	@echo "ğŸ“¦ Updating app module dependencies..."
	npm update

.PHONY: all help build test lint lint-fix pre-synth deploy clean update